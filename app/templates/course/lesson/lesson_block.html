{% extends 'base.html' %}
{% block title %}
Урок
{% endblock %}
{% block extended_content %}
{% autoescape off %}
<div class="container" style="padding-top:20px;">
    <div class="row">
        <div class="col-3">
            {% include 'left_block_lesson.html' %}
        </div>
        <div class="col-9">
            {%for task in tasks %}
            <div style="background:#fafafa; width:100%;border-radius:5px;padding:10px 5px 5px 15px;">
                <div class="row">
                    <div class="col-10" style="font-size:18px;">{{task.name}}</div>
                    <div class="col-1"></div>
                    <div class="col">{{task.cost}}</div>
                </div>
                <hr>
                <div style="padding-bottom:15px;">{{task.desc}}</div>
                {% if task.format_flag == 0 %}
                <form method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="task_id" value="{{task.id}}">
                    <input type="text" class="form-control" name="data" placeholder="Answer">
                    <div class="text-center" style="padding-top:15px; margin-bottom:10px;">
                        <button type="submit" class="btn btn-dark">Отправить</button>
                    </div>
                </form>
                <div>
                    <table class="table table-sm table-inverse">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>Время</th>
                          <th>Ваш ответ</th>
                          <th>Балл</th>
                        </tr>
                      </thead>
                         <tbody>
                    {% for ans in task.answers.all %}
                        {% if ans.user_id == user_id %}
                        {% if ans.score > 0%}
                        <tr style="color:green">
                          <th scope="row">{{  forloop.counter }}</th>
                          <td>{{ ans.time |date:"m/d/Y H:m:s" }}</td>
                          <td>{{ ans.answer }}</td>
                          <td>{{ ans.score }}</td>
                        </tr>
                        {% else %}
                        <tr>
                          <th scope="row">{{  forloop.counter }}</th>
                          <td>{{ ans.time |date:"m/d/Y H:m:s" }}</td>
                          <td>{{ ans.answer }}</td>
                          <td>{{ ans.score }}</td>
                        </tr>
                        {% endif %}
                        {% endif %}
                    {% endfor%}
                         </tbody>
                    </table>
                </div>
                {% elif task.format_flag == 1 %}
                <form method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="task_id" value="{{task.id}}">
                    <textarea class="form-control" name="data" rows="3"></textarea>
                    <div class="text-center" style="padding-top:15px; margin-bottom:10px;">
                        <button type="submit" class="btn btn-dark">Отправить</button>
                    </div>
                </form>
                {% endif %}
            </div>
            <br>
            {% endfor %}
        </div>
    </div>
</div>
{% endautoescape %}
{% endblock %}